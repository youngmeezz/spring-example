## Intro

스프링이 개발자에게 제공하는 가장 중요한 가치 는 *객체지향*과 *테스트*

=> 애플리케이션은 계속 변하고 복잡하는 변화해감

- 첫번쨰 전략 : 확장과 변화를 고려한 객체지향적 설계와 그것을 효과적으로 담아낼 수 있는
IoC/DI 같은 기술
- 두번째 전략 : 변화에 유연하게 대처할 수 있는 테스트 기술


## 2.1 UserDaoTest 다시 보기


### 2.1.1 테스트의 유용성

chap01에서 UserDao의 클래스를 책임에 따라 분리 & 인터페이스 도입 

& 오브젝트 팩토리를 통해 생성하도록 만들기 & 스프링의 DI 방식을 XML 설정 파일 적용

=> 처음과 동일한 기능을 수행함을 보장하는 것 == 테스트 



### 2.1.2 UserDaoTest의 특징

*기존 UserDaoTest*
<pre>
public class UserDaoTest {
	public static void main(String[] args) throws ClassNotFoundException, SQLException {
		ApplicationContext context = new GenericXmlApplicationContext("applicationContext.xml");
		
		UserDao dao = context.getBean("userDao", UserDao.class);
		
		User user = new User();
		user.setId("whiteship");
		user.setName("백기선");
		user.setPassword("married");

		dao.add(user);
			
		System.out.println(user.getId() + " 등록 성공");
		
		User user2 = dao.get(user.getId());
		System.out.println(user2.getName());
		System.out.println(user2.getPassword());
			
		System.out.println(user2.getId() + " 조회 성공");
	}
}
</pre>


=>
- 자바에서 가장 손쉽게 실행 가능한 main() 메소드 이용
- 테스트할 대상인 UserDao의 오브젝트를 가져와 메소드를 호출
- 테스트에 사용할 입력 값(User Object)을 직접 코드에서 만듬
- 테스트의 결과를 콘솔에 출력
- 각 단계의 작업이 에러 없이 끝나면 콘솔에 성공 메시지로 출력



**웹을 통한 DAO 테스트 방법의 문제점**

보통 웹에서 서비스, MVC 프레젠테이션 계층까지 포함한 모든 입출력 기능을 대충이라도

만들고 테스트

=> 웹 화면을 통해 값을 입력하고, 기능을 수행하고 결과를 확인하는 방법은 가장 흔히 쓰이는 방법이지만,

DAO에 대한 테스트로서는 단점이 너무 많음 (+서비스,컨트롤러,뷰 등 모든 레이어의 기능을 다 만들고

테스트를 하는 것이 더 큰 문제)


**작은 단위의 테스트** 

테스트하고자 하는 대상이 명확하다면, 그 대상에만 집중해서 테스트하는 것이 바람직함

UserDaoTest는 한 가지 관심에 집중할 수 있게 만든 작은 단위로 만들어진 테스트

=> 이렇게 작은 단위의 코드에 대해 테스트를 수행하는 것을 단위 테스트(unit test)

(단위는 절대적인 것이 아니라, 하나의 관심에 집중해서 효율적으로 테스트할 만한 범위의 단위라고 보면 됨)



*단위 테스트가 필요한 이유?*

개발자가 설계하고 만든 코드가 원래 의도한 대로 동작하는지를 개발자 스스로 빨리 확인받기 위해서!


**자동수행 테스트 코드**

UserDaoTest의 한 가지 특징은 테스트할 데이터가 코드를 통해 제공 되고, 테스트 작업 역시

코드를 통해 자동으로 실행 된다는 점 (웹 화면 띄우고 폼에 값 입력하는 것과 비교)

=> 이렇게 테스트는 자동으로 수행되도록 코드로 만들어지는 것이 중요

=> 또한, 애플리케이션을 구성하는 클래스 안에 테스트 코드를 포함시키는 것보다는

별도의 테스트용 클래스를 만들어서 테스트 코드를 넣는 편이 나음

( e.g : 처음 UserDao안에 main메소드 -> UserDaoTest )

=> 자동으로 수행되는 테스트는 자주 반복할 수 있음



**지속적인 개선과 점진적인 개발을 위한 테스트**

처음 초난감 DAO -> 객체지향적 코드로 발전시키면서 일등 공신은 테스트 !

만약 테스트를 하지 않았더라면, 미덥지 않을 수 있고 중간에 이쯤 수정하자 하고

포기할 수 있었음. 테스트를 통해 무엇이 잘못됐는지 바로 확인할 수 있었던 것

추가적으로, UserDao의 기능을 추가하려고 할 때도 미리 만들어둔 테스트 코드는

유용하게 쓰일 수 있음



### 2.1.3 UserDaoTest의 문제점

- **수동 확인 작업의 번거로움** <br>
UserDaoTest는 테스트를 수행하는 과정과 입력 데이터의 준비를 모두 자동으로 진행하도록 만듬 <br>
하지만 여전히 사람 눈으로 확인하는 과정이 필요 <br>
( add() 후 get() 한 값이 일치하는지 확인해주지 않고, 콘솔에 값만 출력 해줌 <br>
콘솔에 나온 값을 보고 눈으로 확인해야 함 ) <br>
=> 몇 가지 필드에 대해 테스트하는 건 별 수고가 아닐 수 있지만 <br>
검증해야 하는 양이 많고 복잡해지면 불편함을 느끼게 될 수 밖에없고 <br>
작은 차이는 미처 발견하지 못하고 넘어가는 실수를 할 가능성도 있음


- **실행 작업의 번거로움** <br>
아무리 간단히 실행 가능 한 main() 메소드라도 매번 실행하는 것은 제법 번거로움 <br>
DAO가 많아지면 main() 메소드도 그만 큼 만들어짐<br>
전체 기능을 테스트해보기 위해 main() 메소드를 수백 번 실행할 수고가 필요할 수 있음<br>
또한 그 결과를 눈으로 확인해서 기록 후 이를 종합해서 전체 기능을 모두 테스트한<br>
결과를 정리하려면 이것도 제법 큰 작업<br>
=> main() 메소드를 사용하는 것보다, 좀 더 편리하고 체계적으로 <br>
테스트를 실행하고 그 결과를 확인하는 방법이 절실히 필요



 




 
























